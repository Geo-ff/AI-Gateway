########################################
# 网关主配置（custom-config.toml 示例）
#
# 优先读取 custom-config.toml；如不存在则回退到 config.toml。
# 此文件用于控制：
# - Provider / API Key 负载均衡策略
# - HTTP 监听地址与端口
# - 日志与计费所使用的存储后端（SQLite / Postgres）
########################################

[load_balancing]
# 负载均衡策略：
# - "first_available"：总是使用列表中的第一个 Provider 与其第一把密钥
# - "round_robin"：在 Provider 列表之间按顺序轮询，同时在每个 Provider 的 api_keys 中顺序轮询
# - "random"：在 Provider 列表和 api_keys 中随机选择
#
# 当前配置为顺序轮询，会在所有 Provider 与其密钥之间依次轮询，达到均匀分摊请求的效果。
strategy = "round_robin"

[server]
# HTTP 服务监听地址（通常为 0.0.0.0 或 127.0.0.1）
host = "0.0.0.0"
# HTTP 服务监听端口
port = 8080
# 可选：管理员 HTTP 访问密钥（例如用于保护敏感管理接口），为空表示不启用
# admin_secret = "your-admin-secret"

[logging]
# 如配置了 pg_url，则网关会优先使用 Postgres 存储日志 / 模型缓存 / 管理令牌等数据
# 示例为本地 GaussDB / Postgres 连接串，根据实际环境修改：
pg_url = "host=127.0.0.1 port=15432 dbname=postgres user=gaussdb password=MyPassword123@abc"

# 使用的 schema 名称（不填写时默认使用数据库默认 schema）
pg_schema = "public"

# 可选：Postgres 连接池大小（未配置时使用默认值）
# pg_pool_size = 4

# 如未配置 pg_url，则会回退到本地 SQLite 数据库文件：
# database_path = "data/gateway.db"

# 可选：API Key 日志策略（如何在日志中展示密钥）
# - "none"   ：不记录任何形式的 Key
# - "masked"：记录脱敏后的 Key（默认）
# - "plain" ：记录明文 Key（仅在完全可信环境下使用，谨慎）
# key_log_strategy = "masked"
