### å‰åç«¯å¯¹æ¥

#### é¡¹ç›®æœ€æ–°çŠ¶æ€ï¼ˆ2026-01-10 æ›´æ–°ï¼‰

âœ… P0 å®Œæˆæ¸…å•ï¼šcaptok å·²æ¥å…¥ Auth(JWT+refresh)+Users çœŸæ•°æ® CRUD+Keys/Token(=ClientToken) çœŸæ•°æ® CRUD+toggleï¼›åç«¯ OpenAPI/.env.example å·²å¯¹é½å¹¶æ‹†åˆ†å‰ç«¯/åç«¯çŠ¶æ€é¿å…è¯¯åˆ¤

**å‰ç«¯æ¨¡å—ç²¾ç®€ï¼š**
- âœ… ä¿ç•™æ¨¡å—ï¼škeysã€channelsã€usersã€chatsã€dashboardã€authã€settings
- âŒ åˆ é™¤æ¨¡å—ï¼šappsï¼ˆå·²åœ¨é‡æ„ä¸­ç§»é™¤ï¼‰

#### å½“å‰æƒ…å†µ
å‰ç«¯å·²å®Œæˆ Authï¼ˆJWT+refresh å•é£é‡è¯•ï¼‰æ¥å…¥ï¼Œå¹¶å·²å°† Users/Keys(Token=ClientToken) é¡µé¢ä» mock data åˆ‡æ¢ä¸ºçœŸå®æ¥å£ï¼ˆ/admin/users*ã€/admin/tokens*ï¼‰ï¼ŒSchema å®šä¹‰å¦‚ä¸‹ï¼š
  | æ¨¡å—     | Schema æ–‡ä»¶                          | ç”¨é€”             |
  |----------|--------------------------------------|------------------|
  | Keys     | /home/Geoff001/Code/Project/captok/src/features/keys/data/schema.ts     | API å¯†é’¥æ•°æ®ç»“æ„ |
  | Channels | /home/Geoff001/Code/Project/captok/src/features/channels/data/schema.ts | æ¸ é“æ•°æ®ç»“æ„     |
  | Users    | /home/Geoff001/Code/Project/captok/src/features/users/data/schema.ts    | ç”¨æˆ·æ•°æ®ç»“æ„     |

**å¤‡æ³¨ï¼š** chats å’Œ dashboard æ¨¡å—æš‚æ—  Schema å®šä¹‰ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ã€‚
å¦å¤–ï¼Œsrc/lib/handle-server-error.ts å®šä¹‰äº†å‰ç«¯æœŸæœ›çš„é”™è¯¯å“åº”æ ¼å¼ã€‚

#### åç«¯æ•°æ®æ¨¡å‹
åç«¯é¡¹ç›®çš„æ•°æ®æ¨¡å‹å®šä¹‰åˆ†å¸ƒåœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼š

| æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä¸»è¦æ•°æ®ç»“æ„ | ç”¨é€” |
|------|---------|-------------|------|
| æ—¥å¿—ç±»å‹ | src/logging/types.rs | RequestLog, CachedModel, ProviderOpLog | è¯·æ±‚æ—¥å¿—ã€æ¨¡å‹ç¼“å­˜ã€æä¾›å•†æ“ä½œæ—¥å¿— |
| ç®¡ç†ä»¤ç‰Œ | src/admin/mod.rs | ClientToken, CreateTokenPayload, UpdateTokenPayload | å®¢æˆ·ç«¯ä»¤ç‰Œï¼ˆClient Tokenï¼‰ç®¡ç†ã€åˆ›å»ºå’Œæ›´æ–° |
| å­˜å‚¨ç‰¹å¾ | src/server/storage_traits.rs | AdminPublicKeyRecord, TuiSessionRecord, LoginCodeRecord, WebSessionRecord | ç®¡ç†å‘˜å¯†é’¥ã€TUIä¼šè¯ã€ç™»å½•ç ã€Webä¼šè¯ |
| é…ç½®è®¾ç½® | src/config/settings.rs | Provider, Settings, LoadBalancing, ServerConfig, LoggingConfig | æä¾›å•†é…ç½®ã€ç³»ç»Ÿè®¾ç½®ã€è´Ÿè½½å‡è¡¡ |
| ç”¨æˆ·ç®¡ç† | src/users.rs | User, CreateUserPayload, UpdateUserPayload, UserStore | ç”¨æˆ·æ•°æ®ç»“æ„ä¸ CRUD å­˜å‚¨æŠ½è±¡ |

#### å½“å‰ä»»åŠ¡ï¼ˆå®æ—¶æ›´æ–°ï¼‰
1. âœ… å‰ç«¯ï¼šAuth å·²æ¥å…¥ï¼ˆ`/auth/login`ã€`/auth/me`ã€`/auth/refresh`ã€`/auth/logout`ï¼›è‡ªåŠ¨æ³¨å…¥ Bearerï¼›401 è‡ªåŠ¨ refresh å•é£é‡è¯•ï¼‰
2. âœ… å‰ç«¯ï¼šUsers é¡µé¢å·²æ¥å…¥çœŸå®æ¥å£å¹¶å®Œæˆ CRUDï¼ˆ`/admin/users`ã€`/admin/users/{id}`ï¼›ä¸å†ä½¿ç”¨ mockï¼‰
3. âœ… å‰ç«¯ï¼šKeys/Token é¡µé¢å·²æ¥å…¥çœŸå®æ¥å£å¹¶å®Œæˆ CRUD+toggleï¼ˆ`/admin/tokens`ã€`/admin/tokens/{id}`ã€`/admin/tokens/{id}/toggle`ï¼›ä¸å†ä½¿ç”¨ mockï¼‰
4. âœ… åç«¯ï¼šAuth/Users/Tokens ç«¯ç‚¹å·²å®ç°ä¸”é”™è¯¯ç»“æ„/çŠ¶æ€ç ç»Ÿä¸€ï¼ˆ401/403ï¼›`{code,message}`ï¼‰ï¼ŒOpenAPI å·²å¯¹é½
5. âœ… é…ç½®æç¤ºï¼šgateway_zero `.env.example` å·²è¡¥é½ `GW_JWT_SECRET`/`GATEWAY_BOOTSTRAP_CODE` ç­‰ï¼›captok `.env.example` å·²è¡¥é½ `VITE_API_BASE_URL`

#### ä»»åŠ¡å®Œæˆæƒ…å†µï¼ˆå®æ—¶æ›´æ–°ï¼‰
1. âœ… åç«¯æ•°æ®æ¨¡å‹çš„å®šä¹‰å’Œåˆ†å¸ƒå·²æŒ‡å‡º
2. âœ… apiè§„èŒƒæ–‡ä»¶å·²å®Œæˆï¼Œè·¯å¾„ï¼š/home/Geoff001/Code/Project/Graduation_Project/gateway_zero/openapi.yaml
3. âœ… åç«¯å·²æ–°å¢ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆAdmin Users CRUDï¼‰ï¼Œå¹¶è½åº“æ”¯æŒ SQLite/Postgres
   - è·¯ç”±ï¼š`/admin/users`ã€`/admin/users/{id}`
   - ä»£ç ï¼š`src/server/handlers/admin_users.rs`ã€`src/users.rs`
4. âœ… å·²è¡¥å……ç”¨æˆ·æ¨¡å—æœ€å°å•å…ƒæµ‹è¯•è¦†ç›–ï¼ˆ`cargo test` å°†åŒ…å« users ç›¸å…³ç”¨ä¾‹ï¼‰
5. âœ… å‰ç«¯å·²æ–°å¢ Users API é€‚é…å±‚ï¼ˆDTOâ†”Domainï¼‰ï¼š`src/features/users/api/*`
6. âœ… å‰ç«¯å·²æ–°å¢æœ€å°è¯·æ±‚å±‚ `axios` clientï¼š`src/lib/api-client.ts`ï¼ˆè‡ªåŠ¨é™„åŠ  `Authorization: Bearer <token>`ï¼›baseURL è¯»å– `VITE_API_BASE_URL`ï¼‰
7. âœ… ClientToken å·²è¡¥é½ `id/name` å­—æ®µï¼Œå¹¶åŒæ­¥æ›´æ–° OpenAPIã€å‰ç«¯ä»¤ç‰Œç®¡ç†é¡µé¢ä¸ TUIï¼ˆè·¯ç”±æŒ‰ `{id}` æ“ä½œï¼‰

---

## å‰åç«¯ API å¯¹æ¯”åˆ†ææŠ¥å‘Š

> ğŸ“… æ›´æ–°æ—¶é—´ï¼š2025-12-30
> ğŸ”„ æœ¬æ¬¡æ›´æ–°ï¼šå‰ç«¯é¡¹ç›®ç²¾ç®€ï¼ˆåˆ é™¤ apps æ¨¡å—ï¼‰ï¼Œæ ¸å¿ƒæ¨¡å— Schema æ— å˜åŒ–

### ä¸€ã€æ¦‚å¿µæ˜ å°„å…³ç³»

| å‰ç«¯æ¨¡å— | åç«¯å¯¹åº” | æ˜ å°„å…³ç³» |
|---------|---------|---------|
| **Keys** (API å¯†é’¥) | **ClientToken** (å®¢æˆ·ç«¯ä»¤ç‰Œ) | âš ï¸ éƒ¨åˆ†å¯¹åº”ï¼Œå­—æ®µå·®å¼‚å¤§ |
| **Channels** (æ¸ é“) | **Provider** (æä¾›å•†) | âš ï¸ æ¦‚å¿µç›¸è¿‘ï¼Œç»“æ„ä¸åŒ |
| **Users** (ç”¨æˆ·) | **User**ï¼ˆç”¨æˆ·ç®¡ç†æ¨¡å—ï¼‰ | âœ… åç«¯å·²å®ç°ï¼›âœ… å‰ç«¯å·²æ¥å…¥ï¼ˆå­—æ®µæ˜ å°„ + CRUDï¼‰ |

---

### äºŒã€Keys â†” ClientToken å­—æ®µå¯¹æ¯”

#### 2.1 å­—æ®µæ˜ å°„è¡¨

| å‰ç«¯å­—æ®µ | åç«¯å­—æ®µ | çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|------|
| `id` | `id` | ğŸŸ¢ å¯¹åº” | éæ•æ„Ÿæ ‡è¯†ï¼Œç”¨äºç®¡ç†ç«¯åˆ—è¡¨/æ“ä½œï¼ˆCRUD æŒ‰ `{id}`ï¼‰ |
| `name` | `name` | ğŸŸ¢ å¯¹åº” | å¯†é’¥å¯è¯»åç§°ï¼ˆå¯é€‰ï¼Œä¸å¡«åˆ™åç«¯è‡ªåŠ¨ç”Ÿæˆï¼‰ |
| `status` | `enabled` | ğŸŸ¡ è½¬æ¢ | å‰ç«¯ enumï¼Œåç«¯ boolean |
| `validFrom` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— ç”Ÿæ•ˆæ—¶é—´ |
| `validUntil` | `expires_at` | ğŸŸ¢ å¯¹åº” | æ ¼å¼éœ€ç»Ÿä¸€ |
| `neverExpire` | âŒ æ—  | ğŸŸ¡ æ¨å¯¼ | å¯ç”± `expires_at=null` æ¨å¯¼ |
| `quota` | `max_amount` | ğŸŸ¢ å¯¹åº” | è¯­ä¹‰ä¸€è‡´ |
| `unlimitedQuota` | âŒ æ—  | ğŸŸ¡ æ¨å¯¼ | å¯ç”± `max_amount=null` æ¨å¯¼ |
| `usedQuota` | `amount_spent` | ğŸŸ¢ å¯¹åº” | è¯­ä¹‰ä¸€è‡´ |
| `remark` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— å¤‡æ³¨å­—æ®µ |
| `allowedModels` | `allowed_models` | ğŸŸ¢ å¯¹åº” | å®Œå…¨ä¸€è‡´ |
| `allowedIps` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ—  IP ç™½åå• |
| `blockedIps` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ—  IP é»‘åå• |
| `organizationId` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— ç»„ç»‡æ¦‚å¿µ |
| `secretKey` | `token` | ğŸŸ¢ å¯¹åº” | å¯†é’¥å­—ç¬¦ä¸² |
| `createdAt` | `created_at` | ğŸŸ¢ å¯¹åº” | å‘½åé£æ ¼ä¸åŒ |
| `isFavorite` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— æ”¶è—åŠŸèƒ½ |
| âŒ æ—  | `prompt_tokens_spent` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ç»Ÿè®¡ |
| âŒ æ—  | `completion_tokens_spent` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ç»Ÿè®¡ |
| âŒ æ—  | `total_tokens_spent` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ç»Ÿè®¡ |

#### 2.2 è°ƒæ•´å»ºè®®

| ä¼˜å…ˆçº§ | è°ƒæ•´é¡¹ | è´Ÿè´£æ–¹ | è¯´æ˜ |
|-------|-------|-------|------|
| âœ… å®Œæˆ | æ·»åŠ  `name` å­—æ®µ | åç«¯ | å¯†é’¥éœ€è¦å¯è¯»åç§° |
| âœ… å®Œæˆ | æ·»åŠ  `id` å­—æ®µ | åç«¯ | ç”¨äºå‰ç«¯åˆ—è¡¨æ“ä½œï¼ˆç®¡ç†ç«¯æ¥å£æŒ‰ `{id}`ï¼‰ |
| ğŸŸ¡ ä¸­ | æ·»åŠ  `remark` å­—æ®µ | åç«¯ | å¤‡æ³¨åŠŸèƒ½å¸¸ç”¨ |
| ğŸŸ¡ ä¸­ | æ·»åŠ  IP ç™½/é»‘åå• | åç«¯ | å®‰å…¨æ§åˆ¶éœ€æ±‚ |
| ğŸŸ¢ ä½ | `isFavorite` | å‰ç«¯å­˜å‚¨ | å¯ç”¨ localStorage |
| ğŸŸ¢ ä½ | Token ç»Ÿè®¡å­—æ®µ | å‰ç«¯é€‚é… | å±•ç¤ºåç«¯ç»Ÿè®¡æ•°æ® |

---

### ä¸‰ã€Channels â†” Provider å­—æ®µå¯¹æ¯”

#### 3.1 å­—æ®µæ˜ å°„è¡¨

| å‰ç«¯å­—æ®µ | åç«¯å­—æ®µ | çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|------|
| `id` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯ç”¨ `name` ä½œä¸ºæ ‡è¯† |
| `name` | `name` | ğŸŸ¢ å¯¹åº” | å®Œå…¨ä¸€è‡´ |
| `status` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— å¯ç”¨/ç¦ç”¨çŠ¶æ€ |
| `organizationId` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— ç»„ç»‡æ¦‚å¿µ |
| `upstreamEndpointType` | `api_type` | ğŸŸ¡ è½¬æ¢ | è¯­ä¹‰ç›¸è¿‘ |
| `gatewayEndpointType` | âŒ æ—  | ğŸ”´ ç¼ºå¤± | åç«¯æ— ç½‘å…³ç«¯ç‚¹ç±»å‹ |
| âŒ æ—  | `base_url` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ |
| âŒ æ—  | `api_keys` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ |
| âŒ æ—  | `models_endpoint` | ğŸ”µ æ–°å¢ | åç«¯ç‰¹æœ‰ |

**å‰ç«¯ç‰¹æœ‰å­—æ®µï¼ˆåç«¯ç¼ºå¤±ï¼‰ï¼š**

| å­—æ®µ | è¯´æ˜ |
|-----|------|
| `performanceMetrics` | æ€§èƒ½æŒ‡æ ‡ï¼ˆå»¶è¿Ÿã€æˆåŠŸç‡ã€è¯·æ±‚æ•°ï¼‰ |
| `quota` / `usedQuota` | é¢åº¦ç®¡ç† |
| `tags` | æ ‡ç­¾åˆ†ç±» |
| `providerKeys` | å¯†é’¥è½®æ¢ç®¡ç† |
| `keyRotationStrategy` | å¯†é’¥è½®æ¢ç­–ç•¥ |
| `isFavorite` | æ”¶è—åŠŸèƒ½ |

#### 3.2 è°ƒæ•´å»ºè®®

| ä¼˜å…ˆçº§ | è°ƒæ•´é¡¹ | è´Ÿè´£æ–¹ | è¯´æ˜ |
|-------|-------|-------|------|
| ğŸ”´ é«˜ | å‰ç«¯é€‚é… `base_url` | å‰ç«¯ | å¿…è¦é…ç½®å­—æ®µ |
| ğŸ”´ é«˜ | å‰ç«¯é€‚é… `api_keys` | å‰ç«¯ | ä¸ `providerKeys` æ•´åˆ |
| ğŸŸ¡ ä¸­ | æ·»åŠ  `status` å­—æ®µ | åç«¯ | æ¸ é“å¯ç”¨/ç¦ç”¨æ§åˆ¶ |
| ğŸŸ¡ ä¸­ | æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡ | åç«¯ | ä»æ—¥å¿—èšåˆè®¡ç®— |
| ğŸŸ¢ ä½ | `tags` æ ‡ç­¾ | åç«¯ | å¯é€‰åŠŸèƒ½ |

---

### å››ã€Users æ¨¡å—åˆ†æ

#### 4.1 ç°çŠ¶

åç«¯å·²å®ç°ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆAdmin Users CRUDï¼‰ï¼Œå‰ç«¯å®šä¹‰çš„ç”¨æˆ·æ¨¡å‹å¯ä»¥ç›´æ¥å¯¹æ¥ï¼Œä½†éœ€è¦åšå­—æ®µæ˜ å°„ï¼š

```typescript
// å‰ç«¯ User Schema
{
  id, firstName, lastName, username, email, phoneNumber,
  status: 'active' | 'inactive' | 'invited' | 'suspended',
  role: 'superadmin' | 'admin' | 'cashier' | 'manager',
  createdAt, updatedAt
}
```

åç«¯è¿”å›å­—æ®µï¼ˆsnake_caseï¼‰ï¼š
- `first_name` â†” `firstName`
- `last_name` â†” `lastName`
- `phone_number` â†” `phoneNumber`
- `created_at` â†” `createdAt`
- `updated_at` â†” `updatedAt`

#### 4.2 è°ƒæ•´å»ºè®®

| ä¼˜å…ˆçº§ | è°ƒæ•´é¡¹ | è¯´æ˜ |
|-------|-------|------|
| âœ… å®Œæˆ | å‰ç«¯è¡¥é½å­—æ®µæ˜ å°„ä¸è¯·æ±‚å±‚ | Users æ¨¡å—å·²ä» mock data è¿ç§»åˆ°çœŸå®æ¥å£ï¼ˆ/admin/users*ï¼‰ |
| âœ… å®Œæˆ | å®ç°è®¤è¯æˆæƒç³»ç»Ÿ | JWT + refresh token rotation + logout revocationï¼›å‰ç«¯å·²æ¥å…¥å¹¶æ”¯æŒ 401 è‡ªåŠ¨ç»­æœŸ |
| ğŸŸ¡ ä¸­ | è§’è‰²æƒé™æ§åˆ¶ | RBAC æ¨¡å‹ |

---

### äº”ã€API ç«¯ç‚¹å¯¹æ¯”

#### 5.1 åç«¯å·²æœ‰ç«¯ç‚¹

| åˆ†ç±» | ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|-----|------|-----|------|
| **ä»¤ç‰Œç®¡ç†** | `/admin/tokens` | GET | è·å–ä»¤ç‰Œåˆ—è¡¨ |
| | `/admin/tokens` | POST | åˆ›å»ºä»¤ç‰Œ |
| | `/admin/tokens/{id}` | GET/PUT/DELETE | ä»¤ç‰Œ CRUDï¼ˆæŒ‰ idï¼‰ |
| | `/admin/tokens/{id}/toggle` | POST | å¯ç”¨/ç¦ç”¨ä»¤ç‰Œ |
| **æä¾›å•†** | `/providers` | GET/POST | æä¾›å•†åˆ—è¡¨/åˆ›å»º |
| | `/providers/{provider}` | GET/PUT/DELETE | æä¾›å•† CRUD |
| | `/providers/{provider}/keys` | GET/POST/DELETE | å¯†é’¥ç®¡ç† |
| **æ—¥å¿—** | `/admin/logs` | GET | è¯·æ±‚æ—¥å¿— |
| **ç»Ÿè®¡** | `/admin/metrics/usage` | GET | ä½¿ç”¨é‡ç»Ÿè®¡ |
| **ä»·æ ¼** | `/admin/model-prices` | GET/POST | æ¨¡å‹ä»·æ ¼ |

#### 5.2 å‰ç«¯éœ€è¦çš„è®¤è¯ç«¯ç‚¹ï¼ˆåç«¯å·²å®ç°ï¼Œå‰ç«¯å·²æ¥å…¥ï¼‰

| æ¨¡å— | ç«¯ç‚¹ | æ–¹æ³• | çŠ¶æ€/è¯´æ˜ |
|-----|---------|-----|------|
| **è®¤è¯** | `/auth/login` | POST | âœ… åç«¯å·²å®ç°ï¼›âœ… å‰ç«¯å·²æ¥å…¥ |
| | `/auth/logout` | POST | âœ… åç«¯å·²å®ç°ï¼›âœ… å‰ç«¯å·²æ¥å…¥ |
| | `/auth/me` | GET | âœ… åç«¯å·²å®ç°ï¼›âœ… å‰ç«¯å·²æ¥å…¥ |
| | `/auth/refresh` | POST | âœ… åç«¯å·²å®ç°ï¼›âœ… å‰ç«¯å·²æ¥å…¥ï¼ˆ401 è‡ªåŠ¨åˆ·æ–°åé‡è¯•ï¼‰ |

---

### å…­ã€æ€»ç»“ä¸è¡ŒåŠ¨è®¡åˆ’

#### 6.1 å·®å¼‚ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ |
|-----|------|
| ğŸŸ¢ å¯ç›´æ¥å¯¹æ¥ | 5 ä¸ªå­—æ®µ |
| ğŸŸ¡ éœ€è½¬æ¢é€‚é… | 4 ä¸ªå­—æ®µ |
| ğŸ”´ åç«¯éœ€æ–°å¢ | 12+ ä¸ªå­—æ®µ |
| ğŸ”µ å‰ç«¯éœ€é€‚é… | 6 ä¸ªå­—æ®µ |

#### 6.2 æ¨èè¡ŒåŠ¨é¡ºåº

```
é˜¶æ®µä¸€ï¼šåŸºç¡€å¯¹æ¥ï¼ˆä¼˜å…ˆï¼‰
â”œâ”€â”€ 1. âœ… å‰ç«¯åˆ›å»º API é€‚é…å±‚ï¼ˆå­—æ®µæ˜ å°„ï¼‰ 
â”œâ”€â”€ 1.1 âœ… é…ç½® `VITE_API_BASE_URL` å¹¶æ¥å…¥ Users é¡µé¢ï¼ˆæ›¿æ¢ mock dataï¼‰
â”œâ”€â”€ 2. âœ… åç«¯ ClientToken æ·»åŠ  nameã€id å­—æ®µï¼ˆç®¡ç†ç«¯ CRUD æŒ‰ `{id}`ï¼‰
â””â”€â”€ 3. âœ… å¯¹æ¥ Keys/Tokenï¼ˆClientTokenï¼‰ç®¡ç†ç«¯ CRUD + toggleï¼ˆ/admin/tokens*ï¼‰

é˜¶æ®µäºŒï¼šåŠŸèƒ½å®Œå–„
â”œâ”€â”€ 4. âœ… åç«¯æ–°å¢ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼ˆå·²å®Œæˆï¼‰
â”œâ”€â”€ 5. âœ… å®ç°è®¤è¯æˆæƒç³»ç»Ÿï¼ˆé‚®ä»¶å¯†ç æ‰¾å›å‰ç«¯è¿˜æœªå®ç°ç•Œé¢å¯¹æ¥ï¼‰
â””â”€â”€ 6. å¯¹æ¥ Channels/Provider æ¨¡å—

é˜¶æ®µä¸‰ï¼šå¢å¼ºåŠŸèƒ½
â”œâ”€â”€ 7. IP ç™½/é»‘åå•åŠŸèƒ½
â”œâ”€â”€ 8. æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡
â””â”€â”€ 9. æ ‡ç­¾ã€æ”¶è—ç­‰è¾…åŠ©åŠŸèƒ½
```

#### 6.3 å‘½åé£æ ¼ç»Ÿä¸€å»ºè®®

| ä½ç½® | å½“å‰é£æ ¼ | å»ºè®® |
|-----|---------|------|
| å‰ç«¯å­—æ®µ | camelCase | ä¿æŒ |
| åç«¯å­—æ®µ | snake_case | ä¿æŒ |
| é€‚é…å±‚ | è‡ªåŠ¨è½¬æ¢ | å‰ç«¯æ·»åŠ æ˜ å°„å‡½æ•° |

---

> **å¤‡æ³¨**ï¼šæœ¬æ–‡æ¡£å°†éšå¯¹æ¥è¿›åº¦æŒç»­æ›´æ–°

âœ… æœ¯è¯­å¯¹é½ï¼šç»Ÿä¸€ Client Token / Admin Identity æœ¯è¯­ï¼Œå¹¶åŒæ­¥æ›´æ–° OpenAPI ä¸æ–‡æ¡£ï¼ˆå…¨å±€æ— æ®‹ç•™ï¼‰

- âœ… P0ï¼šæ–°å¢ `/auth/login` `/auth/me` `/auth/logout`ï¼ˆJWT AccessTokenï¼‰ï¼Œç®¡ç†ç«¯è·¯ç”±æ”¯æŒ Bearer JWTï¼Œå¹¶å¯¹é½ 401/403 é‰´æƒé”™è¯¯ç 
- âœ… P1ï¼šusers è¡¨æ–°å¢ password_hashï¼ˆé¦–ä¸ªç”¨æˆ·å³ç®¡ç†å‘˜ï¼‰ï¼Œå‰ç«¯æ”¹ä¸ºè°ƒç”¨ /auth/login è·å– JWT é©±åŠ¨ accessToken
- âœ… é‰´æƒä¸€è‡´æ€§ï¼š/admin/* ä¸ /providers/* å…¨é‡åˆ‡åˆ° JWT ä¼˜å…ˆé‰´æƒï¼Œå¹¶ç»Ÿä¸€ 401/403 è¿”å›ç 
- âœ… P2ï¼š/auth/register å¢åŠ  bootstrap codeï¼›å¼•å…¥ refresh token + rotation + server-side revocationï¼Œå‰ç«¯æ¥å…¥æ— æ„Ÿç»­æœŸä¸ logout æ’¤é”€
- âœ… P3ï¼šè½åœ° RBAC v1ï¼ˆä»… superadmin å¯è®¿é—® /admin/* /providers/*ï¼‰ï¼ŒClientToken ç»‘å®š user_id å¹¶æ–°å¢ç”¨æˆ·ä¾§åªè¯»/è‡ªç®¡æ¥å£ï¼ˆ/model-pricesã€/me/*ã€/auth/change-passwordï¼‰
- âœ… P4ï¼šå®ç° Resend é‚®ä»¶æ‰¾å›å¯†ç ï¼ˆ/auth/forgot-password + /auth/reset-passwordï¼‰ï¼Œreset token ä¸€æ¬¡æ€§å¯è¿‡æœŸä¸”ä»…å­˜ hashï¼Œé‡ç½®åæ’¤é”€ refresh tokens
- âœ… P5ï¼šæ–‡æ¡£å£°æ˜ gateway_zero å†…ç½® frontend/frontend_tui ä¸ºè¿‡æ¸¡å½¢æ€ï¼Œcaptok ä¸ºé•¿æœŸä¸»å‰ç«¯å¹¶è§„åˆ’å¼ƒç”¨æ—§å‰ç«¯
